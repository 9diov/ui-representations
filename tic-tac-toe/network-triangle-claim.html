<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Network Triangle Claim</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600&family=DM+Mono:wght@400;500&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: #f4f3ef;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    font-family: 'DM Sans', sans-serif;
  }

  .card {
    background: #fff;
    padding: 36px 48px 40px;
    max-width: 600px;
    width: 100%;
    border-radius: 22px;
    box-shadow: 0 8px 56px #00000010, 0 1px 3px #0000000a;
  }

  .header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 20px;
  }

  h1 {
    font-family: 'DM Mono', monospace;
    font-size: 10.5px;
    font-weight: 400;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color: #c0c0b8;
    margin-bottom: 4px;
  }

  h2 {
    font-size: 22px;
    font-weight: 600;
    color: #111;
    letter-spacing: -0.02em;
  }

  .scores {
    display: flex;
    gap: 10px;
    align-items: center;
    flex-shrink: 0;
    margin-top: 2px;
  }

  .score-pill {
    display: flex;
    align-items: center;
    gap: 7px;
    padding: 5px 12px 5px 8px;
    border-radius: 30px;
    font-family: 'DM Mono', monospace;
    font-size: 12px;
    font-weight: 500;
    border: 1.5px solid transparent;
    transition: all 0.2s;
    opacity: 0.4;
  }
  .score-pill.active { opacity: 1; border-color: currentColor; }
  .score-dot { width: 9px; height: 9px; border-radius: 50%; }
  .p1-pill { color: #e85d75; }
  .p1-pill .score-dot { background: #e85d75; }
  .p2-pill { color: #3b82f6; }
  .p2-pill .score-dot { background: #3b82f6; }

  svg { width: 100%; height: auto; display: block; }

  .node-group { cursor: pointer; }
  .node-group.claimed { cursor: default; }

  .status-bar {
    margin-top: 18px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
  }

  .status-msg {
    font-size: 14px;
    color: #555;
    line-height: 1.5;
    flex: 1;
  }
  .status-msg .p1 { color: #e85d75; font-weight: 600; }
  .status-msg .p2 { color: #3b82f6; font-weight: 600; }

  .btn-restart {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    font-weight: 500;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    padding: 7px 16px;
    border-radius: 20px;
    border: 1.5px solid #ddd;
    background: #fff;
    color: #888;
    cursor: pointer;
    transition: all 0.15s;
    flex-shrink: 0;
  }
  .btn-restart:hover { border-color: #bbb; color: #444; }

  .win-banner {
    margin-top: 14px;
    padding: 13px 20px;
    border-radius: 12px;
    font-size: 15px;
    font-weight: 600;
    text-align: center;
    display: none;
  }
  .win-banner.show {
    display: block;
    animation: pop 0.3s cubic-bezier(0.34,1.56,0.64,1);
  }
  @keyframes pop {
    from { transform: scale(0.88); opacity: 0; }
    to   { transform: scale(1);    opacity: 1; }
  }
</style>
</head>
<body>
<div class="card">

  <div class="header">
    <div>
      <h1>Strategy Game</h1>
      <h2>Network Triangle Claim</h2>
    </div>
    <div class="scores">
      <div class="score-pill p1-pill active" id="pill1">
        <span class="score-dot"></span>
        <span>P1 &nbsp;<span id="score1">0</span></span>
      </div>
      <div class="score-pill p2-pill" id="pill2">
        <span class="score-dot"></span>
        <span>P2 &nbsp;<span id="score2">0</span></span>
      </div>
    </div>
  </div>

  <!--
    Node positions on circle: center=(260,260) r=195, clockwise from top, 40¬∞ apart
    A=(260,65)  B=(385,111)  C=(452,226)  D=(429,358)  E=(327,443)
    F=(193,443) G=(91,358)   H=(68,226)   I=(135,111)
  -->
  <svg id="gameSvg" viewBox="0 0 520 520" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <filter id="ns" x="-40%" y="-40%" width="180%" height="180%">
        <feDropShadow dx="0" dy="2" stdDeviation="5" flood-color="#00000028"/>
      </filter>
    </defs>

    <!-- Guide circle -->
    <circle cx="260" cy="260" r="195" fill="none" stroke="#e8e6e0" stroke-width="1.2"/>

    <!-- Decorative edges -->
    <g stroke="#e2e0da" stroke-width="1" fill="none">
      <line x1="260" y1="65"  x2="385" y2="111"/>
      <line x1="385" y1="111" x2="452" y2="226"/>
      <line x1="452" y1="226" x2="429" y2="358"/>
      <line x1="429" y1="358" x2="327" y2="443"/>
      <line x1="327" y1="443" x2="193" y2="443"/>
      <line x1="193" y1="443" x2="91"  y2="358"/>
      <line x1="91"  y1="358" x2="68"  y2="226"/>
      <line x1="68"  y1="226" x2="135" y2="111"/>
      <line x1="135" y1="111" x2="260" y2="65"/>
      <line x1="260" y1="65"  x2="452" y2="226" stroke-dasharray="4,4" opacity="0.7"/>
      <line x1="452" y1="226" x2="327" y2="443" stroke-dasharray="4,4" opacity="0.7"/>
      <line x1="327" y1="443" x2="91"  y2="358" stroke-dasharray="4,4" opacity="0.7"/>
      <line x1="91"  y1="358" x2="135" y2="111" stroke-dasharray="4,4" opacity="0.7"/>
      <line x1="135" y1="111" x2="429" y2="358" stroke-dasharray="4,4" opacity="0.5"/>
      <line x1="193" y1="443" x2="68"  y2="226" stroke-dasharray="4,4" opacity="0.5"/>
    </g>

    <!-- Winning triangles -->
    <polygon class="tri" data-tri="0" points="260,65 385,111 452,226"   fill="#F59E0B" fill-opacity="0.11" stroke="#F59E0B" stroke-opacity="0.45" stroke-width="1.8"/>
    <polygon class="tri" data-tri="1" points="429,358 327,443 193,443"  fill="#0EA5E9" fill-opacity="0.11" stroke="#0EA5E9" stroke-opacity="0.45" stroke-width="1.8"/>
    <polygon class="tri" data-tri="2" points="91,358 68,226 135,111"    fill="#F43F5E" fill-opacity="0.11" stroke="#F43F5E" stroke-opacity="0.45" stroke-width="1.8"/>
    <polygon class="tri" data-tri="3" points="260,65 429,358 91,358"    fill="#10B981" fill-opacity="0.10" stroke="#10B981" stroke-opacity="0.42" stroke-width="1.8"/>
    <polygon class="tri" data-tri="4" points="385,111 327,443 68,226"   fill="#8B5CF6" fill-opacity="0.10" stroke="#8B5CF6" stroke-opacity="0.42" stroke-width="1.8"/>
    <polygon class="tri" data-tri="5" points="452,226 193,443 135,111"  fill="#F97316" fill-opacity="0.10" stroke="#F97316" stroke-opacity="0.42" stroke-width="1.8"/>
    <polygon class="tri" data-tri="6" points="260,65 327,443 135,111"   fill="#6366F1" fill-opacity="0.10" stroke="#6366F1" stroke-opacity="0.40" stroke-width="1.8"/>
    <polygon class="tri" data-tri="7" points="452,226 327,443 91,358"   fill="#14B8A6" fill-opacity="0.10" stroke="#14B8A6" stroke-opacity="0.40" stroke-width="1.8"/>

    <!-- Nodes (no inline onclick ‚Äî JS attaches listeners after load) -->
    <g filter="url(#ns)">
      <g class="node-group" data-node="A"><circle class="node-circle" cx="260" cy="65"  r="20" fill="#1e293b"/><text class="node-label" x="260" y="71"  text-anchor="middle" font-family="'DM Mono',monospace" font-size="13" font-weight="500" fill="white" pointer-events="none">A</text></g>
      <g class="node-group" data-node="B"><circle class="node-circle" cx="385" cy="111" r="20" fill="#1e293b"/><text class="node-label" x="385" y="117" text-anchor="middle" font-family="'DM Mono',monospace" font-size="13" font-weight="500" fill="white" pointer-events="none">B</text></g>
      <g class="node-group" data-node="C"><circle class="node-circle" cx="452" cy="226" r="20" fill="#1e293b"/><text class="node-label" x="452" y="232" text-anchor="middle" font-family="'DM Mono',monospace" font-size="13" font-weight="500" fill="white" pointer-events="none">C</text></g>
      <g class="node-group" data-node="D"><circle class="node-circle" cx="429" cy="358" r="20" fill="#1e293b"/><text class="node-label" x="429" y="364" text-anchor="middle" font-family="'DM Mono',monospace" font-size="13" font-weight="500" fill="white" pointer-events="none">D</text></g>
      <g class="node-group" data-node="E"><circle class="node-circle" cx="327" cy="443" r="20" fill="#1e293b"/><text class="node-label" x="327" y="449" text-anchor="middle" font-family="'DM Mono',monospace" font-size="13" font-weight="500" fill="white" pointer-events="none">E</text></g>
      <g class="node-group" data-node="F"><circle class="node-circle" cx="193" cy="443" r="20" fill="#1e293b"/><text class="node-label" x="193" y="449" text-anchor="middle" font-family="'DM Mono',monospace" font-size="13" font-weight="500" fill="white" pointer-events="none">F</text></g>
      <g class="node-group" data-node="G"><circle class="node-circle" cx="91"  cy="358" r="20" fill="#1e293b"/><text class="node-label" x="91"  y="364" text-anchor="middle" font-family="'DM Mono',monospace" font-size="13" font-weight="500" fill="white" pointer-events="none">G</text></g>
      <g class="node-group" data-node="H"><circle class="node-circle" cx="68"  cy="226" r="20" fill="#1e293b"/><text class="node-label" x="68"  y="232" text-anchor="middle" font-family="'DM Mono',monospace" font-size="13" font-weight="500" fill="white" pointer-events="none">H</text></g>
      <g class="node-group" data-node="I"><circle class="node-circle" cx="135" cy="111" r="20" fill="#1e293b"/><text class="node-label" x="135" y="117" text-anchor="middle" font-family="'DM Mono',monospace" font-size="13" font-weight="500" fill="white" pointer-events="none">I</text></g>
    </g>
  </svg>

  <div class="status-bar">
    <div class="status-msg" id="statusMsg"></div>
    <button class="btn-restart" id="btnRestart">‚Ü∫ Restart</button>
  </div>
  <div class="win-banner" id="winBanner"></div>

</div>

<script>
(function () {
  // ‚îÄ‚îÄ Constants ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const COLORS   = { 1: '#e85d75', 2: '#3b82f6' };
  const NAMES    = { 1: 'Player 1', 2: 'Player 2' };
  const NODES    = ['A','B','C','D','E','F','G','H','I'];
  const TRIPLES  = [
    ['A','B','C'], ['D','E','F'], ['G','H','I'],
    ['A','D','G'], ['B','E','H'], ['C','F','I'],
    ['A','E','I'], ['C','E','G']
  ];
  const TRI_BASE_COLORS = [
    '#F59E0B','#0EA5E9','#F43F5E','#10B981',
    '#8B5CF6','#F97316','#6366F1','#14B8A6'
  ];

  // ‚îÄ‚îÄ Cache all DOM refs up front ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const svg        = document.getElementById('gameSvg');
  const statusMsg  = document.getElementById('statusMsg');
  const winBanner  = document.getElementById('winBanner');
  const btnRestart = document.getElementById('btnRestart');
  const pill1      = document.getElementById('pill1');
  const pill2      = document.getElementById('pill2');
  const score1El   = document.getElementById('score1');
  const score2El   = document.getElementById('score2');

  // Node groups & circles, keyed by node name
  const nodeGroup  = {};
  const nodeCircle = {};
  svg.querySelectorAll('.node-group').forEach(g => {
    const n = g.getAttribute('data-node');
    nodeGroup[n]  = g;
    nodeCircle[n] = g.querySelector('.node-circle');
  });

  // Triangle polygons, keyed by index
  const triEls = {};
  svg.querySelectorAll('.tri').forEach(p => {
    triEls[p.getAttribute('data-tri')] = p;
  });

  // ‚îÄ‚îÄ Game state ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  let claimed       = {};
  let currentPlayer = 1;
  let gameOver      = false;
  let scores        = { 1: 0, 2: 0 };
  let wonTriangles  = new Set();

  // ‚îÄ‚îÄ Attach node click listeners ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  NODES.forEach(n => {
    nodeGroup[n].addEventListener('click', () => claimNode(n));
  });
  btnRestart.addEventListener('click', restartGame);

  // ‚îÄ‚îÄ Core functions ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function claimNode(node) {
    if (gameOver || claimed[node]) return;

    claimed[node] = currentPlayer;

    // Colour the node
    nodeCircle[node].setAttribute('fill', COLORS[currentPlayer]);
    nodeCircle[node].setAttribute('r', '22');
    nodeGroup[node].style.cursor = 'default';
    nodeGroup[node].style.pointerEvents = 'none';

    // Check wins
    const justWon = [];
    TRIPLES.forEach((triple, idx) => {
      if (wonTriangles.has(idx)) return;
      if (triple.every(n => claimed[n] === currentPlayer)) {
        wonTriangles.add(idx);
        justWon.push(idx);
        highlightTriangle(idx, currentPlayer);
      }
    });

    if (justWon.length > 0) {
      gameOver = true;
      scores[currentPlayer]++;
      score1El.textContent = scores[1];
      score2El.textContent = scores[2];
      showWin(currentPlayer, justWon);
      return;
    }

    if (Object.keys(claimed).length === 9) {
      gameOver = true;
      showDraw();
      return;
    }

    currentPlayer = currentPlayer === 1 ? 2 : 1;
    updateStatus();
  }

  function highlightTriangle(idx, player) {
    const c = COLORS[player];
    const el = triEls[idx];
    el.setAttribute('fill', c);
    el.setAttribute('fill-opacity', '0.28');
    el.setAttribute('stroke', c);
    el.setAttribute('stroke-opacity', '1');
    el.setAttribute('stroke-width', '2.8');
  }

  function resetTriangle(idx) {
    const el = triEls[idx];
    el.setAttribute('fill', TRI_BASE_COLORS[idx]);
    el.setAttribute('fill-opacity', '0.11');
    el.setAttribute('stroke', TRI_BASE_COLORS[idx]);
    el.setAttribute('stroke-opacity', '0.45');
    el.setAttribute('stroke-width', '1.8');
  }

  function updateStatus() {
    const c   = COLORS[currentPlayer];
    const cls = currentPlayer === 1 ? 'p1' : 'p2';
    statusMsg.innerHTML =
      `<span style="display:inline-block;width:8px;height:8px;border-radius:50%;background:${c};margin-right:6px;vertical-align:middle;position:relative;top:-1px;"></span>` +
      `<span class="${cls}">${NAMES[currentPlayer]}</span>'s turn ‚Äî click a node to claim it.`;
    pill1.classList.toggle('active', currentPlayer === 1);
    pill2.classList.toggle('active', currentPlayer === 2);
  }

  function showWin(player, idxs) {
    const c   = COLORS[player];
    const cls = player === 1 ? 'p1' : 'p2';
    const labels = idxs.map(i => TRIPLES[i].join('¬∑')).join(', ');
    statusMsg.innerHTML =
      `üèÜ <span class="${cls}">${NAMES[player]}</span> wins by completing <strong>${labels}</strong>!`;
    pill1.classList.toggle('active', player === 1);
    pill2.classList.toggle('active', player === 2);

    winBanner.style.cssText = `display:block;background:${c}1a;color:${c};border:1.5px solid ${c}44;`;
    winBanner.textContent = `üéâ ${NAMES[player]} wins!`;
    winBanner.classList.add('show');

    // Dim unclaimed nodes
    NODES.forEach(n => {
      if (!claimed[n]) {
        nodeGroup[n].style.opacity = '0.3';
        nodeGroup[n].style.pointerEvents = 'none';
      }
    });
  }

  function showDraw() {
    statusMsg.innerHTML = `ü§ù It's a <strong>draw</strong> ‚Äî all nodes claimed, no triangle completed!`;
    winBanner.style.cssText = 'display:block;background:#f3f4f6;color:#6b7280;border:1.5px solid #e5e7eb;';
    winBanner.textContent = 'ü§ù Draw! No winner this round.';
    winBanner.classList.add('show');
    pill1.classList.remove('active');
    pill2.classList.remove('active');
  }

  function restartGame() {
    claimed       = {};
    currentPlayer = 1;
    gameOver      = false;
    wonTriangles  = new Set();

    NODES.forEach(n => {
      nodeCircle[n].setAttribute('fill', '#1e293b');
      nodeCircle[n].setAttribute('r', '20');
      nodeGroup[n].style.opacity = '1';
      nodeGroup[n].style.cursor  = 'pointer';
      nodeGroup[n].style.pointerEvents = '';
    });

    for (let i = 0; i < 8; i++) resetTriangle(i);

    winBanner.classList.remove('show');
    winBanner.style.display = 'none';

    updateStatus();
  }

  // ‚îÄ‚îÄ Init ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  updateStatus();
}());
</script>
</body>
</html>
